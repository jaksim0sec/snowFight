<!DOCTYPE html>
<html lang="en">
  <head>
    <title>눈싸움5</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Noto+Sans+KR:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        width: 100vw;
        height: 100vh;
        margin: 0px;
        padding: 0px;
        background-color: black;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
        font-family: 'Gowun Dodum', sans-serif;
        font-weight: 400;
        font-style: normal;
      }

      #보드 {
        width: 95vw;
        height: 90vh;
        border: none;
        border-radius: 10px;
        background: linear-gradient(to bottom, #9eeae0, #b3f0e7, #d1faf3);
        overflow: hidden;
        position: relative;
      }

      #그림자 {
        width: 95vw;
        height: 90vh;
        border: none;
        border-radius: 10px;
        box-shadow: inset -8px -8px 5px #00000050, inset 8px 8px #ffffff30;
        pointer-events: none;
        position: absolute;
      }

      #보드 * {
        transition: all 0.3s ease;
      }

      #월드 {
        width: 3000px;
        height: 100%;
        position: absolute;
        bottom: 0px;
        left: calc(50% - 500px);
        display: flex;
        top: 0px;
        overflow: hidden;
        /*justify-content: center;*/
      }

      #땅 {
        position: absolute;
        bottom: 0px;
        width: 100%;
        height: 10%;
        display: flex;
        background: linear-gradient(to top, #fdf1de, #ffffff);
        border-radius: 5px;
      }

      .영역 {
        width: 100%;
        height: 100%;
      }

      #플레이어 {
        width: 45px;
        min-height: 100px;
        position: absolute;
        left: 50%;
        transform: translateX(-50%) scaleX(-1);
        display: flex;
        justify-content: center;
        transition: all 0.5s ease, transform 0.5s ease;
      }

      #플레이어손 {
        width: 15px;
        height: 15px;
        position: absolute;
        left: calc(50% - 30px);
        bottom: calc(10% + 25px);
        transform: translateX(-50%) scaleX(-1);
        display: flex;
        justify-content: center;
        transition: all 0.6s cubic-bezier(0.5, 0.8, 0.3, 1);
        border-radius: 50%;
        border: 1.5px solid #fad3a480;
        background: linear-gradient(45deg, #f1dcbdfd, #ffffff);
      }

      .눈 {
        width: 15px;
        height: 15px;
        position: absolute;
        transition: all /*0.6s cubic-bezier(0.5, 0.8, 0.3, 1)*/ 0.5s ease,
          bottom 0.05s ease, left 0.05s ease;
        border-radius: 50%;
        border: 1.5px solid #fad3a480;
        background: linear-gradient(45deg, #f1dcbdfd, #ffffff);
        filter: brightness(1.1);
      }

      #플레이어 img {
        width: 100%;
        position: absolute;
        bottom: 0px;
      }

      progress {
        width: 65px;
        height: 12px;
        -webkit-appearance: none;
        appearance: none;
        opacity: 0.6;
        transition: all 0.3s ease;
      }

      progress::-webkit-progress-bar {
        background-color: #000000cc;
        border-radius: 8px;
      }

      progress::-webkit-progress-value {
        background: linear-gradient(to right, #ff3e3e, #ff7f7f);
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      progress::-moz-progress-bar {
        background: linear-gradient(to right, #ff3e3e, #ff7f7f);
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .오브젝트 {
        position: absolute;
        bottom: 10%;
      }

      .기지 {
        width: 100px;
        height: 100px;
        /*border: 1px solid black;*/
      }
      #아군기지 {
        left: 20px;
      }

      #적군기지 {
        right: 20px;
      }

      .판 {
        width: 20px;
        height: 80px;
        right: 70%;
        transition: all 1s ease;
      }

      .기관총 {
        /*border: 1px solid black;*/
        width: 250px;
        min-height: 210px;
        display: flex;
        flex-direction: column;
      }

      .기관총 img {
        height: auto;
        width: 100%;
        margin-top: auto;
        /*border: 1px solid black;*/
      }

      #아군기관총 {
        left: calc(50% - 25px - 250px);
      }
      #적군기관총 {
        right: calc(70% - 25px - 380px);
      }

      #플레이어체력 {
        position: absolute;
        left: 50%;
        bottom: calc(10% + 100px);
        transform: translateX(-50%);
      }

      #적군기관총체력 {
        position: absolute;
        right: calc(70% - 300px);
        bottom: calc(10% + 250px);
        transform: translateX(-50%);
        width: 100px;
      }

      #장전바 {
        opacity: 0;
        font-size: 35px;
        font-weight: bold;
        width: 80px;
        height: 80px;
        display: flex;
        border-radius: 50%;
        border: 1px solid #000000;
        position: relative;
        background: conic-gradient(#00000050 0deg, white 0deg);
        transition: all 0.5s ease;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 4px 4px 4px #00000050;
      }

      #내부장전바 {
        width: 90%;
        height: 90%;
        border-radius: inherit;
        background-color: #000000;
        margin: auto;
        display: flex;
        color: white;
        justify-content: center;
        align-items: center;
      }

      #내부장전바 span {
        font-family: monospace;
        font-size: 1rem;
      }

      #아군힐러 {
        width: 45px;
        height: 100px;
        left: 15%;
        border: 1px solid black;
      }
      #판 {
        display: flex;
        flex-direction: column;
        padding: none;
      }
      #판 img {
        width: 20px;
        height: 80px;
        border: none;
        margin: none;
      }

      .window {
        padding: 5px;
        border-radius: 5px;
        background-color: #00000050;
        position: absolute;
        margin: 5px;
        color: white;
      }

      #장전현황 {
        width: 100px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        bottom: calc(8% + 200px);
        left: 10px;
        font-size: 20px;
      }

      #장전현황 button {
        padding: 5px;
        border-radius: 5px;
        background-color: #00000050;
        margin-left: 10px;
        color: white;
        height: 25px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        border: none;
      }

      #장전현황 button:hover {
        background-color: #00000030;
      }

      #장전현황 button:active {
        transform: scale(0.9);
      }

      #아이템 {
        width: 100px;
        height: 200px;
        display: flex;
        flex-direction: column;
        align-items: center;
        bottom: calc(8% - 20px);
        left: 10px;
        font-size: 20px;
        overflow-y: auto;
        overflow-x: hidden;
      }

      #아이템 .카테고리 {
        width: calc(100% - 10px);
        min-height: 60px;
        padding: 5px;
        border-radius: 5px;
        background-color: #00000050;
        margin: 5px 0;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        animation: 반짝 1s ease;
      }

      #아이템 .카테고리:hover {
        transform: translateY(-4px) scale(1.02);
        filter: brightness(1.4);
        background-color: #00000030;
      }

      #아이템 .카테고리:active {
        transform: translateY(4px) scale(0.98);
      }
      #아이템 .카테고리 img {
        width: 30px;
        height: 30px;
        margin-right: 5px;
      }

      #아이템 .카테고리 .fontC div {
        font-size: 9px;
      }

      #아이템 .카테고리 .fontC {
        width: 100%;
      }

      #아이템 .카테고리 .fontC .제목 {
        font-size: 12px;
        font-weight: bold;
      }

      #아이템 .카테고리 .수량 {
        font-size: 8px;
        font-weight: bold;
        position: absolute;
        bottom: 2px;
        background-color: #00000070;
        border-radius: 50%;
        padding: 2px;
        right: 2px;
        width: 12px;
        height: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #아이템::-webkit-scrollbar {
        width: 8px;
      }

      #아이템::-webkit-scrollbar-thumb {
        background-color: #00000050;
        border-radius: 8px;
        border: 1px solid transparent;
        background-clip: padding-box;
      }

      #아이템::-webkit-scrollbar-thumb:hover {
        background-color: #00000090;
      }

      #아이템::-webkit-scrollbar-track {
        background-color: transparent;
      }

      .highlight {
        font-weight: bold;
      }

      @keyframes 반짝 {
        0% {
          filter: brightness(2);
          opacity: 0;
          transform: scale(1.1);
          background-color: #00000020;
        }
        50% {
          filter: brightness(1.5);
          background-color: #00000040;
        }
        100% {
          filter: brightness(1);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <div id="보드">
      <div id="월드">
        <div id="땅">
          <div class="영역"></div>
          <div class="영역"></div>
        </div>
        <div class="오브젝트 기지" id="아군기지">아군기지</div>
        <!--<div class="오브젝트 기관총" id="아군기관총">ㅇㄱ</div>-->
        <div class="오브젝트 판" id="판"><img src="B1.png" /></div>
        <div class="오브젝트 기관총" id="적군기관총"><img src="G1O.png" /></div>
        <progress value="100" max="100" id="적군기관총체력"></progress>
        <img src="" id="아군힐러" class="오브젝트" />
        <div class="오브젝트 기지" id="적군기지">적군기지</div>
        <div></div>
      </div>
      <div id="플레이어" class="오브젝트">
        <img src="w1.png" />
      </div>
      <div id="플레이어손" class="오브젝트"></div>
      <progress value="50" max="100" id="플레이어체력"></progress>
      <div id="장전바" onclick="">
        <div id="내부장전바">
          <span>0.0</span>
        </div>
      </div>
      <div class="window" id="장전현황">
        <span id="장전값"
          >5 / <span class="highlight" style="margin-left: 4px">5</span></span
        >
        <button onmousedown="변수.눈남음 = 0;">↺</button>
      </div>
      <div class="window" id="아이템"></div>
    </div>
    <div id="그림자"></div>

    <script>
      //기본함수팩
      function HTML(name) {
        return document.querySelector(name);
      }
      function 랜덤(min, max) {
        // 출처 : GPT
        const time = Date.now();
        let seed = time ^ (time >> 3);
        seed = (seed * 9301 + 49297) % 233280;
        const random = (seed / 233280) * Math.sin(seed);
        return Math.floor((Math.abs(random) % 1) * (max - min + 1)) + min;
      }

      function 토글(문자, 글자) {
        if (문자.includes(글자)) {
          while (!문자.includes(글자)) {
            문자 = 문자.replace(글자, '');
          }
        } else {
          문자 += 글자;
        }
      }

      function 터치(대상일, 대상이) {
        const 대상1 = HTML(대상일).getBoundingClientRect();
        const 대상2 = HTML(대상이).getBoundingClientRect();

        const 대상1중심 = {
          x: 대상1.left + 대상1.width / 2,
          y: 대상1.top + 대상1.height / 2,
        };
        const 대상2중심 = {
          x: 대상2.left + 대상2.width / 2,
          y: 대상2.top + 대상2.height / 2,
        };

        const 거리 = {
          x: Math.abs(대상1중심.x - 대상2중심.x),
          y: Math.abs(대상1중심.y - 대상2중심.y),
        };

        const 허용거리 = {
          x: (대상1.width + 대상2.width) / 2,
          y: (대상1.height + 대상2.height) / 2,
        };

        return 거리.x <= 허용거리.x && 거리.y <= 허용거리.y;
      }

      //정의
      let 인벤토리 = {};
      const 시스템설정 = { 시간: { 키: 100 } };
      const 게임설정 = {
        상태: { 속도: 25 },
        눈덩이카운터: 0,
        기관총카운터: { 적군: 0, 아군: 0 },
      };
      let 변수 = { 재장전: { 플레이어: true, 적군기관총: true }, 눈남음: 5 };
      const 이미지 = {
        캐릭터: {
          정보: ['w1.png', 'w2.png', 'w3.png'],
          카운터: 0,
        },
        숙캐릭터: {
          정보: ['s1.png', 's2.png', 's3.png'],
          카운터: 0,
        },
      };
      const 함수 = {
        즉시실행키: {
          s: function () {
            요소['#플레이어'].상태 = '숙캐릭터';
            이미지[요소['#플레이어'].상태].카운터 = 0;
            HTML('#플레이어 img').src =
              이미지[요소['#플레이어'].상태].정보[
                이미지[요소['#플레이어'].상태].카운터
              ];
            순간이동(
              '#플레이어손',
              HTML('#플레이어손').style.left,
              'calc(10% + 15px)'
            );
            순간이동(
              '#플레이어체력',
              HTML('#플레이어체력').style.left,
              'calc(10% + 80px)'
            );
            //alert(이미지[요소['#플레이어'].상태])
          },
          w: function () {
            요소['#플레이어'].상태 = '캐릭터';
            순간이동(
              '#플레이어손',
              HTML('#플레이어손').style.left,
              'calc(10% + 25px)'
            );
            순간이동(
              '#플레이어체력',
              HTML('#플레이어체력').style.left,
              'calc(10% + 100px)'
            );
            이미지[요소['#플레이어'].상태].카운터 = 0;
            HTML('#플레이어 img').src =
              이미지[요소['#플레이어'].상태].정보[
                이미지[요소['#플레이어'].상태].카운터
              ];
          },
        },
        키: {
          a: function () {
            HTML('#플레이어').style.transform = 'translateX(-50%) scaleX(1)';
            순간이동(
              '#플레이어손',
              'calc(50% + 30px)',
              HTML('#플레이어손').style.bottom
            );
            if (터치('#플레이어', '.판')) {
              이동('#월드', -게임설정.상태.속도 * 2, 0);
            } else {
              이동('#월드', 게임설정.상태.속도, 0);
              이미지[요소['#플레이어'].상태].카운터++;
              if (
                이미지[요소['#플레이어'].상태].카운터 >
                이미지[요소['#플레이어'].상태].정보.length - 1
              ) {
                이미지[요소['#플레이어'].상태].카운터 = 0;
              }
              //if(이미지[요소['#플레이어'].상태].카운터 === 2){alert('')}
              HTML('#플레이어 img').src =
                이미지[요소['#플레이어'].상태].정보[
                  이미지[요소['#플레이어'].상태].카운터
                ];
            }
          },
          d: function () {
            HTML('#플레이어').style.transform = 'translateX(-50%) scaleX(-1)';
            순간이동(
              '#플레이어손',
              'calc(50% - 30px)',
              HTML('#플레이어손').style.bottom
            );
            if (터치('#플레이어', '.판')) {
              이동('#월드', 게임설정.상태.속도 * 2, 0);
            } else {
              이동('#월드', -게임설정.상태.속도, 0);
              이미지[요소['#플레이어'].상태].카운터++;
              if (
                이미지[요소['#플레이어'].상태].카운터 >
                이미지[요소['#플레이어'].상태].정보.length - 1
              ) {
                이미지[요소['#플레이어'].상태].카운터 = 0;
              }
              HTML('#플레이어 img').src =
                이미지[요소['#플레이어'].상태].정보[
                  이미지[요소['#플레이어'].상태].카운터
                ];
            }
          },

          haveAll: function () {},
        },
        키종료: {
          a: function () {
            setTimeout(() => {
              HTML('#플레이어 img').src =
                이미지[요소['#플레이어'].상태].정보[0];
              if (터치('#플레이어', '.판')) {
                이동('#월드', -게임설정.상태.속도 * 2, 0);
                //console.log('dddd');
              }
            }, 200);
          },
          d: function () {
            setTimeout(() => {
              HTML('#플레이어 img').src =
                이미지[요소['#플레이어'].상태].정보[0];
              if (터치('#플레이어', '.판')) {
                이동('#월드', 게임설정.상태.속도 * 2, 0);
                //console.log('dddd');
              }
            }, 200);
          },
        },
      };

      const 템설명 = {
        HP포션: {
          주소: 'P.png',
          설명: '체력을 <span class = "highlight">10%</span> 회복합니다.',
          효과: function () {
            if (요소['#플레이어'].체력 + 10 > 100) {
              요소['#플레이어'].체력 = 100;
            } else {
              요소['#플레이어'].체력 += 10;
            }
          },
        },
      };
      let 순환 = { 키: {}, 총알: {}, 요청성반복: {} };
      let 요소 = {
        기본형식: { hp: 0, 활성화: true },
        '#플레이어': {
          x: HTML('#플레이어').getBoundingClientRect().left,
          y: HTML('#플레이어').getBoundingClientRect().bottom,
          상태: '캐릭터',
          체력: 100,
        },
        '#적군기관총': {
          체력: 100,
          활성화: true,
        },
      };

      let 관리소규모요소 = [];
      //입력관리
      document.addEventListener('keydown', (e) => {
        const key = e.key;
        //console.log(key)
        if (!순환.키[key] && 함수.키[key]) {
          순환.키[key] = setInterval(() => {
            함수.키[key]();
            함수.키.haveAll();
          }, 시스템설정.시간.키);
        }

        if (함수.즉시실행키[key]) {
          함수.즉시실행키[key]();
          함수.키.haveAll();
        }
      });

      document.addEventListener('keyup', async function (e) {
        const key = e.key;
        if (순환.키[key]) {
          await clearInterval(순환.키[key]);
          delete 순환.키[key];
        }
        if (함수.키종료[key]) {
          함수.키종료[key]();
        }
      });
      document.addEventListener('mouseup', async function (e) {
        if (변수.재장전.플레이어) {
          변수.재장전.플레이어 = false;
          if (변수.눈남음 > 0) {
            변수.눈남음--;
            const 손 = HTML('#플레이어손');
            const 손이전 = HTML('#플레이어손').style.left;
            let 손위치 = 손.getBoundingClientRect();
            //if(e.clientX>손위치.left){alert('dd')}
            await 순간이동('#플레이어손', 손위치.left, 'calc(10% - 50px)');

            setTimeout(async function () {
              순간이동(
                '#플레이어손',
                e.clientX > 손위치.left
                  ? 'calc(50% - 15px + 40px)'
                  : 'calc(50% - 15px - 40px)',
                'calc(10% + 50px)'
              );
              const 손Y = getComputedStyle(손).bottom;
              const 월드 = HTML('#월드');
              const 월드위치 = 월드.getBoundingClientRect();
              const 손X = 손위치.left - 월드위치.left;
              let 목표X = e.clientX - 월드위치.left + 랜덤(-30, 30) + 'px';
              if (Math.abs(e.clientX - 월드위치.left) > Math.abs(손X) + 400) {
                목표X = 손X + 400 * (손X / Math.abs(손X)) + 'px';
              }
              //const 목표Y = '9%';

              // 눈덩이 생성
              let 눈덩이 = document.createElement('div');
              게임설정.눈덩이카운터++;
              눈덩이.classList.add('눈'); // 눈덩이 스타일을 위한 클래스를 추가 (CSS 필요)
              눈덩이.id = `눈덩이${게임설정.눈덩이카운터}`;
              HTML('#월드').appendChild(눈덩이);
              눈덩이 = HTML(`#눈덩이${게임설정.눈덩이카운터}`);

              // 눈덩이 초기 위치를 손의 절대적 위치로 설정 (월드의 상대적 위치로 변환)
              눈덩이.style.position = 'absolute';
              눈덩이.style.left = 손X + 'px';
              눈덩이.style.bottom = '10%';
              //let ㅌ = parseInt(getComputedStyle(눈덩이).bottom);
              //alert(ㅌ)
              //눈덩이.style.border = '1px solid black';
              // 포물선 이동 함수 적용
              const 반복함수 = [
                function () {
                  if (터치('.판', `#눈덩이${게임설정.눈덩이카운터}`)) {
                    return 'stop';
                  }
                  /*if(터치('#적군기관총', `#눈덩이${게임설정.눈덩이카운터}`)){
                return 'stop';
              }*/
                },
                //,function(){console.log('테스트')}
              ];

              const 종료함수 = function () {
                if (
                  터치('#적군기관총', `#눈덩이${게임설정.눈덩이카운터}`) &&
                  요소['#적군기관총'].활성화
                ) {
                  HTML('#적군기관총').style.filter = 'brightness(1.5)';
                  요소['#적군기관총'].체력 -= 20;
                  HTML('#적군기관총체력').value = 요소['#적군기관총'].체력;

                  if (요소['#적군기관총'].체력 < 0) {
                    요소['#적군기관총'].체력 = 0;
                  }
                  if (요소['#적군기관총'].체력 == 0) {
                    //alert('dd')
                    HTML('#적군기관총 img').src = 'G1D.png';
                    보상('HP포션', 3);
                    요소['#적군기관총'].활성화 = false;
                    //HTML('.판').style.transition = 'all 1s ease';
                    setTimeout(() => {
                      이동('.판', 0, -100);
                    }, 500);
                  }
                  setTimeout(() => {
                    HTML('#적군기관총').style.filter = '';
                  }, 200);
                }
                const 위치차 =
                  parseInt(
                    HTML(`#눈덩이${게임설정.눈덩이카운터}`).style.bottom
                  ) -
                  parseInt(HTML('#월드').getBoundingClientRect().height) / 10;
                if (Math.abs(위치차) > 4) {
                  setTimeout(() => {
                    HTML(`#눈덩이${게임설정.눈덩이카운터}`).style.transition =
                      'all 0.5s ease';
                    HTML(`#눈덩이${게임설정.눈덩이카운터}`).style.opacity = 0;
                  }, 500);
                  setTimeout(() => {
                    if (요소[`#눈덩이${게임설정.눈덩이카운터}`]) {
                      delete 요소[`#눈덩이${게임설정.눈덩이카운터}`];
                    }
                    HTML(`#눈덩이${게임설정.눈덩이카운터}`).remove();
                    //게임설정.눈덩이카운터--
                  }, 1000);
                } else {
                  const 값 = 게임설정.눈덩이카운터;
                  setTimeout(() => {
                    setTimeout(() => {
                      HTML(`#눈덩이${값}`).style.transition = 'all 0.5s ease';
                      HTML(`#눈덩이${값}`).style.opacity = 0;
                    }, 500);
                    setTimeout(() => {
                      if (요소[`#눈덩이${값}`]) {
                        delete 요소[`#눈덩이${값}`];
                      }
                      HTML(`#눈덩이${값}`).remove();
                      //게임설정.눈덩이카운터--
                    }, 1000);
                  }, 5000);
                }
              };

              const 강도 =
                요소['#플레이어'].상태 == '숙캐릭터'
                  ? 랜덤(1, 5)
                  : 랜덤(10, 25);
              포물선이동(
                `#눈덩이${게임설정.눈덩이카운터}`,
                목표X,
                800,
                강도,
                반복함수,
                종료함수
              );
              //console.log(터치('#적군기관총', `#눈덩이${게임설정.눈덩이카운터}`))
            }, 100);
            setTimeout(() => {
              순간이동('#플레이어손', 손이전, 'calc(10% + 25px)');
            }, 500);
            setTimeout(() => {
              변수.재장전.플레이어 = true;
            }, 900);
          } else {
            const 손 = HTML('#플레이어손');
            const 손이전X = HTML('#플레이어손').style.left;
            const 손이전Y = HTML('#플레이어손').style.bottom;
            //console.log(손이전X, 손이전Y)
            let 손위치 = 손.getBoundingClientRect();
            순간이동('#플레이어손', 손위치.left, '10%');
            재장전효과();
            setTimeout(() => {
              순간이동('#플레이어손', 손이전X, 손이전Y);
              변수.눈남음 += 5;
              변수.재장전.플레이어 = true;
            }, 2200);
          }
        }
      });

      // 게임 도움 함수
      function 포물선이동(대상, X, 시간, 강도, 함수목록, 종료함수) {
        const 옵 = HTML(대상);
        옵.style.transition = 'none';
        let 옵위 = getComputedStyle(옵);
        let 원x = parseInt(옵위.left);
        let 원y = parseInt(옵위.bottom);
        옵.style.bottom = 원y + 'px';
        //alert(원y)
        const 목x = X.endsWith('%')
          ? (parseFloat(X) / 100) * window.innerWidth
          : parseFloat(X);
        let 거리 = 목x - 원x;
        let 주기 = 10;
        const 횟수 = 시간 / 주기;
        //console.log('횟수',횟수)
        FEk = 강도; //기본값 5 -> 0.1*(횟수/2)
        const g = (FEk / 횟수) * 2; //FEk/횟수*2 //9.8/3 //실제 세상의 3라고 가정
        //console.log('g',g)
        //console.log('calc',g*횟수)
        //console.log(FEk)
        MaxEp = 100;
        let x = 거리 / 횟수;
        let y = FEk;
        //console.log('FEK',FEk);
        //단위 px
        let 테스트 = [0, 0];
        let 카운터 = 0;
        const 포물선운동 = setInterval(async function () {
          카운터++;
          y -= g;
          //y = y.toFixed(4)
          //console.log(g*카운터)
          이동(대상, x, y);
          for (var i = 0; i < 함수목록.length; i++) {
            if (함수목록[i]() === 'stop') {
              종료함수();
              clearInterval(포물선운동);
              return;
            }
            함수목록[i]();
          }
          //if(y>0){테스트[0]+=y}
          //else{테스트[1]-=y}
          //console.log(카운터 , 원y,parseInt(getComputedStyle(옵).bottom) , 테스트)
          if (카운터 + 2 > 횟수) {
            종료함수();
            clearInterval(포물선운동);
            return;
          }
        }, 주기);
      }

      function 이동(대상, x, y) {
        const 대상요소 = HTML(대상);
        const 요소위치 = 대상요소.style;

        // 컴퓨티드 스타일에서 현재 위치 가져오기
        const 컴퓨티드스타일 = getComputedStyle(대상요소);
        const 현재Left = 요소위치.left || 컴퓨티드스타일.left;
        const 현재Bottom = 요소위치.bottom || 컴퓨티드스타일.bottom;

        if (!현재Left || !현재Bottom) {
          console.error('위치를 계산할 수 없습니다.');
          return;
        }

        const 새로운Left = `${(parseFloat(현재Left) + x).toFixed(2)}px`;
        const 새로운Bottom = `${(parseFloat(현재Bottom) + y).toFixed(2)}px`;

        // 이동 후 새로운 위치 설정
        요소위치.left = 새로운Left;
        요소위치.bottom = 새로운Bottom;

        // 요소 데이터 업데이트
        if (요소[대상]) {
          요소[대상].x = 새로운Left;
          요소[대상].y = 새로운Bottom;
        } else {
          요소[대상] = { x: 새로운Left, y: 새로운Bottom, ...요소.기본형식 };
        }
      }

      function 순간이동(대상, x, y) {
        const 대상요소 = HTML(대상);
        const 요소위치 = 대상요소.style;
        요소위치.left = x;
        요소위치.bottom = y;

        // 요소 데이터 업데이트
        if (요소[대상]) {
          요소[대상].x = x;
          요소[대상].y = y;
        } else {
          요소[대상] = { x: x, y: y, ...요소.기본형식 };
        }
      }

      //이동('#플레이어', 100, 1);
      //게임일반함수

      function 전체반복관리() {
        const 관리자 = setInterval(() => {
          HTML(
            '#장전값'
          ).innerHTML = `${변수.눈남음} / <span class = 'highlight' style = 'margin-left: 4px;'>5</span>`;
          /*if (요소['#적군기관총'].체력 == 0) {
            HTML('#적군기관총 img').src = 'G1D.png';
          }*/
          let 기관총감지 =
            HTML('#적군기관총').getBoundingClientRect().left -
              HTML('body').getBoundingClientRect().width / 2 <
            500;
          //console.log(기관총감지)
          if (요소['#적군기관총'].체력 === 0) {
            변수.재장전.적군기관총 = false;
          }
          if (기관총감지) {
            //HTML('#적군기관총').style.backgroundColor = '#000000';
            //HTML('body').style.backgroundColor = 'red';
            //console.log('왜 안되는거지 시발');
            //순환.요청성반복['총알'] =
            //{함수:
            if (변수.재장전.적군기관총) {
              변수.재장전.적군기관총 = false;
              for (var i = 0; i < 4; i++) {
                setTimeout(() => {
                  //console.log('시발')
                  const 월드 = HTML('#월드');
                  const 월드위치 = 월드.getBoundingClientRect();
                  const 기관총X =
                    HTML('#적군기관총').getBoundingClientRect().left -
                    월드위치.left;
                  let 총알 = document.createElement('div');
                  게임설정.기관총카운터.적군++;
                  총알.classList.add('눈');
                  총알.id = `총알${게임설정.기관총카운터.적군}`;
                  HTML('#월드').appendChild(총알);
                  관리소규모요소.push(`#총알${게임설정.기관총카운터.적군}`);
                  총알 = HTML(`#총알${게임설정.기관총카운터.적군}`);
                  const 총알높이계산 =
                    HTML('body').getBoundingClientRect().height / 10 + 138;
                  총알.style.bottom = 총알높이계산 + 'px';
                  총알.style.width = '8px';
                  총알.style.height = '8px';
                  총알.style.left = 기관총X - 4 + 'px';
                }, i * 100);
              }
              setTimeout(() => {
                변수.재장전.적군기관총 = true;
              }, 1000);
            }
          }
          //순환.총알[`총알${게임설정.기관총카운터.적군}`] = setTimeout(()=>{
          //  이동(`#총알${게임설정.기관총카운터.적군}`,-10,-2)
          //},10)
          //포물선이동(`#총알${게임설정.기관총카운터.적군}`,'50%',1000,10,[])
          //,}}

          for (var i = 0; i < 관리소규모요소.length; i++) {
            const 대상 = 관리소규모요소[i];
            이동(대상, -25, -8);
            //console.log('시발 왜 안내려감')
            if (터치('#땅', 대상)) {
              관리소규모요소.splice(i, 1);
              if (요소[대상]) {
                delete 요소[대상];
              }
              i--;
              HTML(대상).remove();
              continue;
            }

            if (터치('#플레이어 img', 대상)) {
              관리소규모요소.splice(i, 1);
              if (요소[대상]) {
                delete 요소[대상];
              }
              i--;
              HTML(대상).remove();
              //console.log('캐릭터 체력 감소 함수 실행 필요');
              요소['#플레이어'].체력 -= 5;
              if (요소['#플레이어'].체력 < 0) {
                요소['#플레이어'].체력 = 0;
              }
              continue;
            }
            if (!터치('#월드', 대상)) {
              관리소규모요소.splice(i, 1);
              if (요소[대상]) {
                delete 요소[대상];
              }
              i--;
              HTML(대상).remove();
              continue;
            }

            if (터치('.판', 대상)) {
              관리소규모요소.splice(i, 1);
              if (요소[대상]) {
                delete 요소[대상];
              }
              i--;
              HTML(대상).remove();
              continue;
            }
            //포물선이동(대상, '50%', 1000, 10, [])
          }
          for (var i = 0; i < Object.keys(순환.요청성반복).length; i++) {
            //setTimeout((i)=>{순환.요청성반복[Object.keys(순환.요청성반복)[i]].함수()},500)
            순환.요청성반복[Object.keys(순환.요청성반복)[i]].함수();
          }
          HTML('#플레이어체력').value = 요소['#플레이어'].체력;
        }, 50);
      }

      전체반복관리();

      function 재장전효과() {
        const 장전바 = HTML('#장전바');
        const 장전숫자 = HTML('#내부장전바 span');
        let 장전각도 = 0;
        let 장전시간 = 6.0;
        장전바.style.opacity = 0.8;
        장전바.style.background = `conic-gradient(#000000CC 0deg, white 0deg)`;
        function 효과() {
          장전각도 += 3;
          장전시간 -= 0.05;

          // Update background
          장전바.style.background = `conic-gradient(#000000CC ${장전각도}deg, white 0deg)`;
          장전숫자.textContent = 장전시간.toFixed(1);
          if (장전각도 >= 360) {
            장전숫자.textContent = '0.0';
            setTimeout(() => {
              장전바.style.opacity = 0;
            }, 100);
            return;
          }

          requestAnimationFrame(효과);
        }

        효과();
      }

      function 보상(템, 수량) {
        if (인벤토리[템]) {
          인벤토리[템].수량 += 수량;
          HTML(`#템${템} .수량`).innerHTML = '⨉' + 인벤토리[템].수량;
        } else {
          인벤토리[템] = { 수량: 수량 };
          const 템카텔 = document.createElement('div');
          템카텔.id = `템${템}`;
          템카텔.classList.add('카테고리');
          템카텔.onclick = function () {
            템사용(템, 1);
          };
          템카텔.innerHTML = `<img src= '${템설명[템].주소}'><div class = 'fontC'><div class = '제목'>${템}</div><div>${템설명[템].설명}</div></div>
        <div class = '수량'>⨉${수량}</div>`;
          HTML('#아이템').appendChild(템카텔);
        }
      }

      function 템사용(템, 수량) {
        let 최종수량 = 수량;
        if (인벤토리[템].수량 < 수량) {
          최종수량 = 인벤토리[템].수량;
          console.log('수상함 감지' + 최종수량, 인벤토리[템].수량);
        }
        for (var i = 0; i < 최종수량; i++) {
          console.log(
            `${최종수량 > 1 ? '→' : '▶'} 아이템 "${템}" 을 사용하였습니다.`
          );
          템설명[템].효과();
        }
        if (최종수량 > 1) {
          console.log(`▶ 아이템 "${템}" 을 최종 ${수량} 개 사용하였습니다.`);
        }
        인벤토리[템].수량 -= 최종수량;
        HTML(`#템${템} .수량`).innerHTML = '⨉' + 인벤토리[템].수량;
        if (인벤토리[템].수량 == 0) {
          //HTML(`#템${템}`).style.animation = '';
          HTML(`#템${템}`).style.opacity = '0';
          setTimeout(() => {
            HTML(`#템${템}`).remove();
            delete 인벤토리[템];
            console.log(`▶ 아이템 "${템}" 을 모두 소모하였습니다.`);
          }, 500);
        }
      }
    </script>
  </body>
</html>
